# æ™ºèƒ½æ—…æ¸¸åŠ©æ‰‹é¡¹ç›®

## é¡¹ç›®æ¦‚è¿°

åŸºäº Streamlit + AI + é£ä¹¦å¤šç»´è¡¨æ ¼çš„æ™ºèƒ½æ—…æ¸¸è§„åˆ’åŠ©æ‰‹ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„æ—…è¡Œæ”»ç•¥ã€‚

## æ ¸å¿ƒåŠŸèƒ½

1. **æ—…è¡Œæ”»ç•¥ç”Ÿæˆ**ï¼šæ ¹æ®ç›®çš„åœ°ã€æ—¶é—´ã€é¢„ç®—è‡ªåŠ¨ç”Ÿæˆæ”»ç•¥
2. **æ™¯ç‚¹æ¨è**ï¼šé‡ç‚¹æ™¯ç‚¹ä»‹ç»ã€é—¨ç¥¨ä¿¡æ¯ã€å…è´¹å¥—é¤
3. **åœè½¦ä¿¡æ¯**ï¼šåœè½¦ä½ç½®ã€åœè½¦è´¹ç”¨
4. **ç¾é£Ÿæ¨è**ï¼šå½“åœ°ç‰¹è‰²é¥®é£Ÿ
5. **ä½å®¿æ¨è**ï¼šæ ¹æ®é¢„ç®—æ¨èä½å®¿åœ°ç‚¹
6. **å¤©æ°”ç©¿è¡£**ï¼šå¤©æ°”ä¿¡æ¯ã€ç©¿è¡£å»ºè®®
7. **äº¤é€šè§„åˆ’**ï¼šæ ¹æ®å‡ºå‘åœ°è§„åˆ’äº¤é€šä¿¡æ¯
8. **è®¢ç¥¨æŒ‡å—**ï¼šæœºç¥¨ã€ç«è½¦ç¥¨ã€é…’åº—é¢„è®¢å»ºè®®å’Œå®˜æ–¹é“¾æ¥ ğŸ« v2.3.0 æ–°å¢
9. **é¿å‘æŒ‡å—**ï¼šè´­ç‰©ã€äº¤é€šã€ä½å®¿ã€é¤é¥®ç­‰å…¨æ–¹ä½é¿å‘å»ºè®® â­ v2.1.0 æ–°å¢
10. **å®æ—¶äº¤é€šä¿¡æ¯**ï¼šé«˜å¾·åœ°å›¾é›†æˆï¼Œå®æ—¶è·¯å†µã€è·¯çº¿è§„åˆ’ã€æ‹¥å µé¢„æµ‹ ğŸš— v2.2.0 æ–°å¢
11. **ç”¨æˆ·è®¤è¯**ï¼šç”¨æˆ·æ³¨å†Œ/ç™»å½•åŠŸèƒ½ï¼Œç®¡ç†å‘˜åœ¨é£ä¹¦è¡¨æ ¼å®¡æ‰¹ ğŸ” v3.0.0 å·²å®Œæˆ
12. **ç”¨æˆ·åå¥½è®°å¿†**ï¼šè‡ªåŠ¨è®°ä½ç”¨æˆ·çš„ä¸ªäººåå¥½ï¼Œå¦‚é…’åº—ä»·ä½ã€å®‰é™éœ€æ±‚ç­‰ ğŸ’¾ v4.0.0 æ–°å¢

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Streamlit (å…è´¹å¼€æº)
- **AI æ¨¡å‹**: DeepSeek (å…è´¹é¢åº¦)
- **æ•°æ®å­˜å‚¨**: é£ä¹¦å¤šç»´è¡¨æ ¼ (å…è´¹ç‰ˆ)
- **å¤©æ°” API**: OpenWeatherMap (æ¨è) / å’Œé£å¤©æ°” (å¤‡ç”¨)
- **åœ°å›¾æœåŠ¡**: é«˜å¾·åœ°å›¾ API (å®æ—¶äº¤é€šã€è·¯çº¿è§„åˆ’)

## é¡¹ç›®æ¶æ„

```
travel_guide/
â”œâ”€â”€ app.py                    # ä¸»å…¥å£
â”œâ”€â”€ pages/                    # v3.0 å¤šé¡µé¢åº”ç”¨
â”‚   â”œâ”€â”€ 1_ç™»å½•.py             # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ 2_æ³¨å†Œ.py             # æ³¨å†Œé¡µé¢
â”œâ”€â”€ clients/
â”‚   â”œâ”€â”€ ai_client.py          # AI æ”»ç•¥ç”Ÿæˆ
â”‚   â”œâ”€â”€ weather_client.py     # å¤©æ°” API
â”‚   â”œâ”€â”€ feishu_client.py      # é£ä¹¦å­˜å‚¨
â”‚   â”œâ”€â”€ amap_client.py        # é«˜å¾·åœ°å›¾äº¤é€šä¿¡æ¯
â”‚   â”œâ”€â”€ booking_client.py     # è®¢ç¥¨ä¿¡æ¯å®¢æˆ·ç«¯ (v2.3.0)
â”‚   â”œâ”€â”€ user_client.py        # é£ä¹¦ç”¨æˆ·æ•°æ®å®¢æˆ·ç«¯ (v3.0)
â”‚   â””â”€â”€ auth_client.py        # è®¤è¯å®¢æˆ·ç«¯ (v3.0)
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ prompts.py            # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ config.py             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ auth.py               # è®¤è¯å·¥å…·å‡½æ•° (v3.0)
â”‚   â””â”€â”€ preferences.py        # åå¥½ç®¡ç†å·¥å…· (v4.0)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ USER_TABLE_SETUP.md   # ç”¨æˆ·è¡¨é…ç½®æŒ‡å— (v3.0)
â”‚   â””â”€â”€ PREFERENCES_SETUP.md  # åå¥½åŠŸèƒ½é…ç½®æŒ‡å— (v4.0)
â”œâ”€â”€ .streamlit/
â”‚   â””â”€â”€ secrets.toml          # é…ç½®æ–‡ä»¶
â””â”€â”€ requirements.txt
```

## æˆæœ¬ä¼°ç®—

| æœåŠ¡ | æˆæœ¬ |
|------|------|
| Streamlit | å…è´¹ |
| DeepSeek API | å…è´¹ |
| é£ä¹¦å¤šç»´è¡¨æ ¼ | å…è´¹ |
| å¤©æ°” API | å…è´¹ï¼ˆæ¯æ—¥1000æ¬¡ï¼‰ |

## é£ä¹¦æ•°æ®è¡¨è®¾è®¡

### å¤šç»´è¡¨æ ¼ç»“æ„

```
é£ä¹¦åº”ç”¨ (APP_ID/APP_SECRET å…±ç”¨)
â”œâ”€â”€ å¤šç»´è¡¨æ ¼1: æ—…è¡Œéœ€æ±‚è¡¨
â”‚   â”œâ”€â”€ app_token: FEISHU_APP_TOKEN_REQUEST
â”‚   â””â”€â”€ table_id: FEISHU_TABLE_ID_REQUEST
â”‚
â”œâ”€â”€ å¤šç»´è¡¨æ ¼2: æ”»ç•¥å­˜æ¡£è¡¨
â”‚   â”œâ”€â”€ app_token: FEISHU_APP_TOKEN_GUIDE
â”‚   â””â”€â”€ table_id: FEISHU_TABLE_ID_GUIDE
â”‚
â””â”€â”€ å¤šç»´è¡¨æ ¼3: ç”¨æˆ·æ•°æ®è¡¨ (v3.0 æ–°å¢)
    â”œâ”€â”€ app_token: FEISHU_APP_TOKEN_USER
    â””â”€â”€ table_id: FEISHU_TABLE_ID_USER
```

### ç”¨æˆ·æ•°æ®è¡¨ (users) - v4.0 æ‰©å±•ç‰ˆ
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| username | text | ç”¨æˆ·å |
| password | text | å¯†ç ï¼ˆæ˜æ–‡å­˜å‚¨ï¼‰ |
| status | text | çŠ¶æ€ï¼špending / active |
| preferences | text | ç”¨æˆ·åå¥½ JSONï¼ˆv4.0 æ–°å¢ï¼‰|

### ç”¨æˆ·éœ€æ±‚è¡¨ (travel_requests)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| request_id | string | è¯·æ±‚ID |
| destination | string | ç›®çš„åœ° |
| origin | string | å‡ºå‘åœ° |
| start_date | date | å‡ºå‘æ—¥æœŸ |
| end_date | date | è¿”å›æ—¥æœŸ |
| budget | number | é¢„ç®— |
| preferences | string | åå¥½ï¼ˆå¤šé€‰ï¼‰ |
| created_at | datetime | åˆ›å»ºæ—¶é—´ |

### æ”»ç•¥å­˜æ¡£è¡¨ (travel_guides)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| guide_id | string | æ”»ç•¥ID |
| request_id | string | å…³è”è¯·æ±‚ID |
| destination | string | ç›®çš„åœ° |
| weather_info | string | å¤©æ°”ä¿¡æ¯JSON |
| guide_content | text | æ”»ç•¥å†…å®¹ |
| created_at | datetime | åˆ›å»ºæ—¶é—´ |

---

## é¡¹ç›®è¿›åº¦

### æŠ€æœ¯å†³ç­–
- **AI æ¨¡å‹**: ä½¿ç”¨ DeepSeekï¼ˆé Geminiï¼‰
- **é£ä¹¦é…ç½®**: ç”¨æˆ·è‡ªè¡Œç”Ÿæˆé£ä¹¦å¤šç»´è¡¨æ ¼ ID

### è¿›åº¦è·Ÿè¸ª

#### é˜¶æ®µä¸€ï¼šåŸºç¡€ç¯å¢ƒæ­å»º âœ… å·²å®Œæˆ
- [x] é¡¹ç›®ç›®å½•ç»“æ„è§„åˆ’
- [x] Git ä»“åº“åˆå§‹åŒ–
- [x] .gitignore é…ç½®
- [x] README.md é¡¹ç›®æ–‡æ¡£
- [x] requirements.txt ä¾èµ–åˆ—è¡¨
- [x] LICENSE å¼€æºè®¸å¯
- [x] docs/API_DOCS.md API æ–‡æ¡£

**å®Œæˆæ—¶é—´**: 2026-02-16

#### é˜¶æ®µäºŒï¼šæ ¸å¿ƒå®¢æˆ·ç«¯å¼€å‘ âœ… å·²å®Œæˆ
- [x] åˆ›å»º clients/ ç›®å½•å’Œ `__init__.py`
- [x] AI å®¢æˆ·ç«¯é€‚é…ï¼ˆä½¿ç”¨ DeepSeekï¼‰
- [x] å¤©æ°”å®¢æˆ·ç«¯å¼€å‘
- [x] é£ä¹¦å®¢æˆ·ç«¯ä¼˜åŒ–

**å®Œæˆæ—¶é—´**: 2026-02-16

#### é˜¶æ®µä¸‰ï¼šæç¤ºè¯å·¥ç¨‹è®¾è®¡ âœ… å·²å®Œæˆ
- [x] æ”»ç•¥ç”Ÿæˆä¸»æç¤ºè¯
- [x] æ™¯ç‚¹è¯¦æƒ…æç¤ºè¯
- [x] ç¾é£Ÿæ¨èæç¤ºè¯
- [x] ç©¿è¡£å»ºè®®æç¤ºè¯

**å®Œæˆæ—¶é—´**: 2026-02-16

#### é˜¶æ®µå››ï¼šä¸»åº”ç”¨å¼€å‘ âœ… å·²å®Œæˆ
- [x] ç”¨æˆ·è¾“å…¥è¡¨å•
- [x] æ”»ç•¥ç”Ÿæˆæµç¨‹
- [x] æ”»ç•¥å±•ç¤ºä¼˜åŒ–
- [x] é£ä¹¦å­˜å‚¨é›†æˆï¼ˆæ—¥æœŸ/å¤šé€‰å­—æ®µæ ¼å¼ä¿®å¤ï¼‰

**å®Œæˆæ—¶é—´**: 2026-02-16

#### é˜¶æ®µäº”ï¼šé«˜çº§åŠŸèƒ½ ğŸ”„ è¿›è¡Œä¸­ï¼ˆå¯é€‰ï¼‰
- [x] æ”»ç•¥ä¼˜åŒ–åŠŸèƒ½ï¼ˆå¿«é€Ÿä¼˜åŒ–æŒ‰é’®ï¼‰
- [ ] å†å²è®°å½•
- [ ] å¯¼å‡ºåŠŸèƒ½
- [ ] UI/UX ä¼˜åŒ–

**å®Œæˆæ—¶é—´**: 2026-02-16

#### é˜¶æ®µå…­ï¼šæµ‹è¯•ä¸éƒ¨ç½² âœ… å·²å®Œæˆ
- [x] åŠŸèƒ½æµ‹è¯•
- [x] Streamlit Cloud éƒ¨ç½²

#### é˜¶æ®µä¸ƒï¼šç”¨æˆ·è®¤è¯åŠŸèƒ½ âœ… å·²å®Œæˆ (v3.0)
- [x] åˆ›å»ºé£ä¹¦ç”¨æˆ·æ•°æ®å®¢æˆ·ç«¯
- [x] åˆ›å»ºè®¤è¯å®¢æˆ·ç«¯ï¼ˆç®€åŒ–ç‰ˆï¼Œæ˜æ–‡å¯†ç ï¼‰
- [x] åˆ›å»ºç™»å½•/æ³¨å†Œé¡µé¢
- [x] é›†æˆè®¤è¯æ£€æŸ¥åˆ°ä¸»åº”ç”¨
- [x] ç”¨æˆ·è¡¨ç»“æ„ï¼ˆ3ä¸ªå­—æ®µï¼‰
- [x] ç®¡ç†å‘˜åœ¨é£ä¹¦è¡¨æ ¼å®¡æ‰¹

### æ€»ä½“è¿›åº¦

```
é˜¶æ®µä¸€ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
é˜¶æ®µäºŒ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
é˜¶æ®µä¸‰ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
é˜¶æ®µå›› â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
é˜¶æ®µäº” â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (v2.1.0 å®Œæˆ)
é˜¶æ®µå…­ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (v2.3.0 å®Œæˆ)
é˜¶æ®µä¸ƒ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (v3.0 å®Œæˆ)
é˜¶æ®µå…« â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (v4.0 å®Œæˆ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
```

### æœ€æ–°æ›´æ–° (2026-02-18)

**v4.0.0 å·²å®Œæˆ âœ…**:
- ğŸ’¾ ç”¨æˆ·åå¥½è®°å¿†åŠŸèƒ½
  - âœ… è‡ªåŠ¨è®°ä½ç”¨æˆ·ä¸ªäººåå¥½ï¼ˆé…’åº—ä»·ä½ã€å®‰é™éœ€æ±‚ç­‰ï¼‰
  - âœ… AI æ™ºèƒ½æå–åå¥½ï¼šä»è‡ªç„¶è¯­è¨€ä¸­æå–ç»“æ„åŒ–åå¥½
  - âœ… åå¥½åˆå¹¶ï¼šå·²ä¿å­˜åå¥½ + ä¸´æ—¶è¾“å…¥ = å®Œæ•´åå¥½
  - âœ… è‡ªåŠ¨ä¿å­˜ï¼šå‹¾é€‰åè‡ªåŠ¨ä¿å­˜åˆ°é£ä¹¦è¡¨æ ¼
  - âœ… è‡ªåŠ¨åŠ è½½ï¼šç™»å½•åè‡ªåŠ¨åŠ è½½å¹¶æ˜¾ç¤ºå·²ä¿å­˜åå¥½
- ğŸ“‹ æ–°å¢æ–‡ä»¶ï¼š
  - `utils/preferences.py` - åå¥½ç®¡ç†å·¥å…·æ¨¡å—
  - `docs/PREFERENCES_SETUP.md` - åå¥½åŠŸèƒ½é…ç½®æŒ‡å—
- ğŸ”§ ç”¨æˆ·æ•°æ®è¡¨æ‰©å±•ï¼šæ–°å¢ `preferences` å­—æ®µï¼ˆæ–‡æœ¬ç±»å‹ï¼‰

**v3.0.0 å·²å®Œæˆ âœ…**:
- ğŸ” ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼ˆç®€åŒ–ç‰ˆï¼‰
  - âœ… ç”¨æˆ·è¡¨ç»“æ„ï¼š3 ä¸ªå­—æ®µï¼ˆusername, password, statusï¼‰
  - âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•é¡µé¢ï¼ˆpages/1_ç™»å½•.py, pages/2_æ³¨å†Œ.pyï¼‰
  - âœ… å¯†ç æ˜æ–‡å­˜å‚¨ï¼ˆæœ€ç®€æ–¹æ¡ˆï¼‰
  - âœ… ä¼šè¯ç®¡ç†ï¼ˆst.session_stateï¼‰
  - âœ… ä¸»åº”ç”¨è®¤è¯æ£€æŸ¥
  - âœ… ç®¡ç†å‘˜åœ¨é£ä¹¦è¡¨æ ¼ä¸­ç›´æ¥å®¡æ‰¹ç”¨æˆ·
- ğŸ“ é…ç½®æ–‡æ¡£ï¼š[docs/USER_TABLE_SETUP.md](docs/USER_TABLE_SETUP.md)

**v2.3.0 å·²å®Œæˆ âœ…**:
- ğŸ« è®¢ç¥¨ä¿¡æ¯æ¨¡å—ï¼ˆAI æ™ºèƒ½æ¨è + å®˜æ–¹é“¾æ¥ï¼‰
  - âœ… æœºç¥¨é¢„è®¢å»ºè®®ï¼šèˆªç©ºå…¬å¸é€‰æ‹©ã€èˆªç­ç±»å‹ã€é¢„ä¼°ä»·æ ¼ã€é¢„è®¢æ—¶æœº
  - âœ… ç«è½¦ç¥¨é¢„è®¢å»ºè®®ï¼šé«˜é“/åŠ¨è½¦æ¨èã€è½¦æ¬¡é€‰æ‹©ã€è´­ç¥¨æŠ€å·§
  - âœ… é…’åº—é¢„è®¢å»ºè®®ï¼šæ ¹æ®é¢„ç®—æ™ºèƒ½æ¨èé…’åº—ç±»å‹ã€ä½ç½®å»ºè®®ã€é¢„è®¢æŠ€å·§
  - âœ… å®˜æ–¹é¢„è®¢é“¾æ¥ï¼šæºç¨‹ã€å»å“ªå„¿ã€12306ã€Booking.com ç­‰å¯ä¿¡å¹³å°
  - âœ… è®¢ç¥¨æŠ€å·§æ€»ç»“ï¼šæå‰é¢„è®¢ã€é¿å¼€é«˜å³°ã€å¤šå¹³å°æ¯”ä»·ç­‰å®ç”¨å»ºè®®
- ğŸ“‹ åŠŸèƒ½è¯´æ˜ï¼š
  - ä½¿ç”¨ AI ç”Ÿæˆä¸ªæ€§åŒ–æœºç¥¨å»ºè®®ï¼ˆåŸºäºç›®çš„åœ°ã€å‡ºå‘åœ°ã€é¢„ç®—ï¼‰
  - ç«è½¦ç¥¨å’Œé…’åº—å»ºè®®é‡‡ç”¨æ™ºèƒ½è§„åˆ™å¼•æ“
  - æ‰€æœ‰è®¢ç¥¨ä¿¡æ¯ä½œä¸ºæ”»ç•¥ç¬¬8éƒ¨åˆ†è‡ªåŠ¨ç”Ÿæˆ

**v2.2.0 å·²å®Œæˆ âœ…**:
- ğŸš— å®æ—¶äº¤é€šä¿¡æ¯æ¨¡å—ï¼ˆé«˜å¾·åœ°å›¾ API é›†æˆï¼‰
  - âœ… é©¾è½¦è·¯çº¿è§„åˆ’ï¼šè·ç¦»ã€æ—¶é—´ã€è¿‡è·¯è´¹ã€çº¢ç»¿ç¯æ•°é‡
  - âœ… åŸå¸‚åæ ‡æ˜ å°„ï¼šæ”¯æŒ 40+ ä¸»è¦åŸå¸‚å’Œæ—…æ¸¸åŸå¸‚
  - âœ… äº¤é€šä¿¡æ¯é›†æˆï¼šè‡ªåŠ¨æ·»åŠ åˆ°ç”Ÿæˆçš„æ”»ç•¥ä¸­
  - âš ï¸ å®æ—¶æ‹¥å µæŒ‡æ•°ï¼šéœ€è¦ä»˜è´¹ API æƒé™ï¼ˆå·²å®ç°ä¼˜é›…é™çº§ï¼‰
- ğŸ“‹ æ–°å¢é…ç½®é¡¹ï¼š`AMAP_API_KEY`ï¼ˆé«˜å¾·åœ°å›¾ Web æœåŠ¡ API Keyï¼‰
- ğŸ“ åŠŸèƒ½è¯´æ˜ï¼š
  - è·¯çº¿è§„åˆ’å®Œå…¨å¯ç”¨ï¼ŒåŸºäºé«˜å¾·åœ°å›¾ Driving API
  - å®æ—¶æ‹¥å µæ•°æ®éœ€è¦ä»˜è´¹è®¢é˜…ï¼Œåº”ç”¨ä¼šæä¾›é€šç”¨å‡ºè¡Œå»ºè®®ä½œä¸ºæ›¿ä»£

**v2.1.0 æ–°å¢åŠŸèƒ½**:
- ğŸš§ é¿å‘æŒ‡å—æ¨¡å—ï¼šä½œä¸ºæ”»ç•¥ç¬¬8éƒ¨åˆ†è‡ªåŠ¨ç”Ÿæˆ
  - è´­ç‰©é™·é˜±æé†’ï¼ˆéœ€è°¨æ…è´­ä¹°çš„å•†å“ã€æ­£è§„åœºæ‰€æ¨èï¼‰
  - äº¤é€šé¿å‘å»ºè®®ï¼ˆæ‰“è½¦æ³¨æ„äº‹é¡¹ã€å…¬å…±äº¤é€šè´­ç¥¨æé†’ï¼‰
  - ä½å®¿é¢„è®¢æ³¨æ„äº‹é¡¹ï¼ˆéšè—è´¹ç”¨æé†’ã€ä½ç½®é€‰æ‹©å»ºè®®ï¼‰
  - é¤é¥®é¿é›·æç¤ºï¼ˆæ¸¸å®¢é™·é˜±é¤å…è¯†åˆ«ã€æœ¬åœ°äººæ¨èåœ°ç‚¹ï¼‰
  - æ™¯ç‚¹é¿å‘ï¼ˆè¿‡åº¦å•†ä¸šåŒ–æ™¯ç‚¹ã€å…è´¹æ›¿ä»£æ–¹æ¡ˆï¼‰
  - å­£èŠ‚æ€§æé†’ï¼ˆæ—ºå­£å‘ç‚¹ã€èŠ‚å‡æ—¥å‡ºè¡Œå»ºè®®ï¼‰

**v0.3.0 åŠŸèƒ½**:
- âœ¨ æ”»ç•¥ä¼˜åŒ–åŠŸèƒ½ï¼šç”¨æˆ·å¯å¯¹å·²ç”Ÿæˆæ”»ç•¥è¿›è¡Œé’ˆå¯¹æ€§æ”¹è¿›
- ğŸŒ¤ï¸ å’Œé£å¤©æ°”APIæ”¯æŒï¼šä¿®æ­£APIè·¯å¾„ï¼Œå¤©æ°”åŠŸèƒ½ç°å·²å¯ç”¨
- ğŸ“‹ å¤åˆ¶æ”»ç•¥åŠŸèƒ½ï¼šå¯å±•å¼€æ–‡æœ¬åŒºåŸŸå¤åˆ¶æ”»ç•¥å†…å®¹

**Bug ä¿®å¤**:
- ä¿®å¤ AI å®¢æˆ·ç«¯æç¤ºè¯å¼•ç”¨é—®é¢˜ï¼ˆç¡¬ç¼–ç  â†’ PromptTemplatesï¼‰
- ä¿®å¤å’Œé£å¤©æ°”åŸå¸‚æŸ¥è¯¢APIè·¯å¾„ï¼š`/geo/v2/city/lookup`
- ä¿®å¤å¤©æ°”å®¢æˆ·ç«¯æä¾›å•†é…ç½®ï¼šä½¿ç”¨ `qweather` æ›¿ä»£ `openweather`
- éªŒè¯ä¸“å±ç«¯ç‚¹åŒæ—¶æ”¯æŒåŸå¸‚æŸ¥è¯¢å’Œå¤©æ°”æŸ¥è¯¢
- ä¿®å¤å¤åˆ¶åŠŸèƒ½å…¼å®¹æ€§é—®é¢˜

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **âœ… v4.0.0 å·²å®Œæˆ**: ç”¨æˆ·åå¥½è®°å¿†åŠŸèƒ½
2. **ğŸ”„ v4.1.0 è§„åˆ’ä¸­**: æ–°åŠŸèƒ½è§„åˆ’
3. **éƒ¨ç½²å‡†å¤‡**: éƒ¨ç½²åˆ° Streamlit Cloud

### é…ç½®æ¸…å•

**âœ… å·²é…ç½®å®Œæˆ**:
- [x] DEEPSEEK_API_KEY
- [x] FEISHU_APP_ID / FEISHU_APP_SECRET
- [x] é£ä¹¦å¤šç»´è¡¨æ ¼ tokens (6ä¸ª - å«ç”¨æˆ·è¡¨)
- [x] WEATHER_API_KEY (å’Œé£å¤©æ°”)
- [x] AMAP_API_KEY (é«˜å¾·åœ°å›¾) âœ… v2.2.0

**ç‰ˆæœ¬ä¿¡æ¯**:
- å½“å‰ç¨³å®šç‰ˆ: v4.0.0 (ç”¨æˆ·åå¥½ç‰ˆ)
- å¼€å‘ç‰ˆæœ¬: v4.1.0 (è§„åˆ’ä¸­)
- å‘å¸ƒæ—¥æœŸ: 2026-02-18
- GitHub: https://github.com/kennyzhang2026/travel_guide
- éƒ¨ç½²çŠ¶æ€: âœ… å·²éƒ¨ç½²åˆ° Streamlit Cloudï¼Œæ”¯æŒæ‰‹æœºç«¯è®¿é—®

### Streamlit Cloud éƒ¨ç½²è¯´æ˜

1. è®¿é—® [Streamlit Cloud](https://streamlit.io/cloud)
2. è¿æ¥ GitHub ä»“åº“ï¼š`kennyzhang2026/travel_guide`
3. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆåœ¨ Secrets ä¸­è®¾ç½®ï¼‰ï¼š
   - `DEEPSEEK_API_KEY`
   - `FEISHU_APP_ID`
   - `FEISHU_APP_SECRET`
   - `FEISHU_APP_TOKEN_REQUEST`
   - `FEISHU_TABLE_ID_REQUEST`
   - `FEISHU_APP_TOKEN_GUIDE`
   - `FEISHU_TABLE_ID_GUIDE`
   - `FEISHU_APP_TOKEN_USER` (v3.0+)
   - `FEISHU_TABLE_ID_USER` (v3.0+)
   - `WEATHER_API_KEY`
   - `AMAP_API_KEY` (v2.2.0+)

4. ä¸»æ–‡ä»¶è·¯å¾„ï¼š`app.py`

**æ‰‹æœºç«¯è®¿é—®**ï¼š
- Streamlit Cloud è‡ªåŠ¨é€‚é…æ‰‹æœºç«¯
- æ¨èä½¿ç”¨æ‰‹æœºæµè§ˆå™¨è®¿é—®
- æ”¯æŒè§¦å±æ“ä½œ

### é£ä¹¦é…ç½®è·å–æŒ‡å—

1. è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/)
2. åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨ï¼Œè·å– `APP_ID` å’Œ `APP_SECRET`
3. åœ¨é£ä¹¦æ–‡æ¡£ä¸­åˆ›å»º**ä¸‰ä¸ªç‹¬ç«‹çš„å¤šç»´è¡¨æ ¼**ï¼š
   - å¤šç»´è¡¨æ ¼1: æ—…è¡Œéœ€æ±‚è¡¨
   - å¤šç»´è¡¨æ ¼2: æ”»ç•¥å­˜æ¡£è¡¨
   - å¤šç»´è¡¨æ ¼3: ç”¨æˆ·æ•°æ®è¡¨ (v3.0 æ–°å¢ï¼Œä»… 2 ä¸ªå­—æ®µ)
4. ä»æ¯ä¸ªå¤šç»´è¡¨æ ¼çš„ URL ä¸­è·å– `app_token`:
   ```
   URL æ ¼å¼: https://xxx.feishu.cn/base/bascnxxxxxxx/app_tokenxxxxxxx
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      (å¯å¿½ç•¥)      (è¿™å°±æ˜¯ app_token)
   ```
5. ä»æ¯ä¸ªå¤šç»´è¡¨æ ¼ä¸­è·å–è¡¨æ ¼çš„ `table_id`:
   - æ‰“å¼€å¤šç»´è¡¨æ ¼ï¼Œç‚¹å‡»"..."
   - é€‰æ‹©"é«˜çº§" -> "å¼€å‘é€‰é¡¹"
   - å¤åˆ¶ Table ID

**ç”¨æˆ·æ•°æ®è¡¨å­—æ®µ (v4.0)**:
- `username` (æ–‡æœ¬) - ç”¨æˆ·å
- `password` (æ–‡æœ¬) - å¯†ç ï¼ˆæ˜æ–‡ï¼‰
- `status` (æ–‡æœ¬) - çŠ¶æ€ï¼špending / active
- `preferences` (æ–‡æœ¬) - ç”¨æˆ·åå¥½ JSONï¼ˆv4.0 æ–°å¢ï¼‰

è¯¦ç»†é…ç½®è¯·å‚è€ƒï¼š
- [docs/USER_TABLE_SETUP.md](docs/USER_TABLE_SETUP.md) - ç”¨æˆ·è¡¨é…ç½®
- [docs/PREFERENCES_SETUP.md](docs/PREFERENCES_SETUP.md) - åå¥½åŠŸèƒ½é…ç½®

---

# ç‰ˆæœ¬è§„åˆ’

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| v0.3.0 | MVP ç¨³å®šç‰ˆ | âœ… å·²å‘å¸ƒ |
| v2.1.0 | é¿å‘æŒ‡å— | âœ… å·²å®Œæˆ (2026-02-17) |
| v2.2.0 | äº¤é€šä¿¡æ¯ | âœ… å·²å®Œæˆ (2026-02-17) |
| v2.3.0 | è®¢ç¥¨ä¿¡æ¯ | âœ… å·²å®Œæˆ (2026-02-18) |
| v3.0.0 | ç”¨æˆ·è®¤è¯åŠŸèƒ½ | âœ… å·²å®Œæˆ (2026-02-18) |
| v4.0.0 | ç”¨æˆ·åå¥½è®°å¿† | âœ… å·²å®Œæˆ (2026-02-18) |
| v4.1.0 | æ–°åŠŸèƒ½ | ğŸ”„ è§„åˆ’ä¸­ |

---

# v4.0 ç”¨æˆ·åå¥½è®°å¿†åŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

v4.0 æ–°å¢ç”¨æˆ·åå¥½è®°å¿†åŠŸèƒ½ï¼Œåº”ç”¨èƒ½å¤Ÿè‡ªåŠ¨è®°ä½ç”¨æˆ·çš„ä¸ªäººåå¥½ï¼Œå¦‚é…’åº—ä»·ä½èŒƒå›´ã€å®‰é™éœ€æ±‚ã€é¤é¥®åå¥½ç­‰ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„æ—…è¡Œæ”»ç•¥ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. åå¥½æå–
- **AI æ™ºèƒ½æå–**ï¼šä½¿ç”¨ DeepSeek API ä»ç”¨æˆ·è¾“å…¥ä¸­æå–ç»“æ„åŒ–åå¥½
- **è§„åˆ™å¤‡ç”¨**ï¼šå½“ AI ä¸å¯ç”¨æ—¶ä½¿ç”¨è§„åˆ™åŒ¹é…

### 2. åå¥½åˆå¹¶
- é•¿æœŸåå¥½ï¼ˆå·²ä¿å­˜ï¼‰+ ä¸´æ—¶åå¥½ï¼ˆæœ¬æ¬¡è¾“å…¥ï¼‰= å®Œæ•´åå¥½
- æ·±åº¦åˆå¹¶ç­–ç•¥ï¼Œä¿ç•™æ‰€æœ‰åå¥½ä¿¡æ¯

### 3. åå¥½ä¿å­˜
- ç”¨æˆ·å‹¾é€‰"ä¿å­˜ä¸ºé»˜è®¤åå¥½"åè‡ªåŠ¨ä¿å­˜
- ä½¿ç”¨é£ä¹¦å¤šç»´è¡¨æ ¼å­˜å‚¨

### 4. åå¥½åº”ç”¨
- ç™»å½•åè‡ªåŠ¨åŠ è½½å·²ä¿å­˜åå¥½
- ç”Ÿæˆæ”»ç•¥æ—¶è‡ªåŠ¨åº”ç”¨åå¥½
- é¡µé¢æ˜¾ç¤ºå·²ä¿å­˜åå¥½ä¾›ç”¨æˆ·å‚è€ƒ

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UI å±‚                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  app.py - ä¸»åº”ç”¨                                      â”‚
â”‚  - æ˜¾ç¤ºå·²ä¿å­˜åå¥½                                     â”‚
â”‚  - "ä¿å­˜ä¸ºé»˜è®¤åå¥½" å¤é€‰æ¡†                             â”‚
â”‚  - è‡ªåŠ¨åˆå¹¶å’Œåº”ç”¨åå¥½                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  utils/preferences.py - åå¥½ç®¡ç†å·¥å…·                 â”‚
â”‚  - extract_preferences_from_input() - æå–åå¥½       â”‚
â”‚  - merge_preferences() - åˆå¹¶åå¥½                    â”‚
â”‚  - preferences_to_text() - åå¥½è½¬æ–‡æœ¬                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  clients/user_client.py - é£ä¹¦ç”¨æˆ·å®¢æˆ·ç«¯             â”‚
â”‚  - get_user_preferences() - è·å–åå¥½                 â”‚
â”‚  - update_user_preferences() - æ›´æ–°åå¥½              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åå¥½æ•°æ®ç»“æ„

```json
{
  "hotel": {
    "budget_min": 200,
    "budget_max": 300,
    "quiet": true,
    "away_from_road": true
  },
  "meal": {
    "type": ["local", "budget_friendly"],
    "spicy_level": "medium"
  },
  "ticket": {
    "check_senior_discount": true,
    "check_student_discount": false,
    "check_free_entry": true
  }
}
```

## æ–°å¢æ–‡ä»¶

- `utils/preferences.py` - åå¥½ç®¡ç†å·¥å…·æ¨¡å—
- `docs/PREFERENCES_SETUP.md` - åå¥½åŠŸèƒ½é…ç½®æŒ‡å—

## é…ç½®è¦æ±‚

é£ä¹¦ç”¨æˆ·è¡¨éœ€æ·»åŠ  `preferences` å­—æ®µï¼ˆæ–‡æœ¬ç±»å‹ï¼‰ã€‚

---

# ç‰ˆæœ¬ 2.0 å¼€å‘è®¡åˆ’

## ç‰ˆæœ¬æ¦‚è¿°

**ç‰ˆæœ¬å·**: v2.0.0
**å¼€å‘åˆ†æ”¯**: `feature/v2.0`
**å¼€å‘æ¨¡å¼**: æ•æ·å¼€å‘ï¼Œé€ä¸ªåŠŸèƒ½å®Œæˆå¹¶æµ‹è¯•ååˆå¹¶åˆ° master

## æ–°å¢åŠŸèƒ½éœ€æ±‚

### 1. é¿å‘æŒ‡å—æ¨¡å— ğŸš§

**åŠŸèƒ½æè¿°**:
é›†æˆå°çº¢ä¹¦ã€ç™¾åº¦æ”»ç•¥ç­‰å¹³å°çš„é¿å‘ä¿¡æ¯ï¼Œä¸ºç”¨æˆ·æä¾›å®ç”¨çš„æ—…è¡Œæ³¨æ„äº‹é¡¹ã€‚

**æ•°æ®æ¥æº**:
- å°çº¢ä¹¦æ¸¸è®°å’Œè¯„è®º
- ç™¾åº¦æ—…æ¸¸æ”»ç•¥
- é©¬èœ‚çªç‚¹è¯„
- æºç¨‹é¿å‘æŒ‡å—

**å®ç°æ–¹å¼**:
- ä½¿ç”¨ AI æ€»ç»“å¹³å°ä¸Šçš„é¿å‘ç»éªŒ
- é’ˆå¯¹ç›®çš„åœ°ç”Ÿæˆä¸“é—¨çš„é¿å‘æŒ‡å—
- åŒ…å«ï¼šè´­ç‰©é™·é˜±ã€äº¤é€šå‘ã€ä½å®¿æ³¨æ„ã€é¤é¥®æ¨èç­‰

**æŠ€æœ¯æ–¹æ¡ˆ**:
```python
# æ–¹æ¡ˆA: ä½¿ç”¨ AI çˆ¬å–å¹¶æ€»ç»“å…¬å¼€ä¿¡æ¯
# æ–¹æ¡ˆB: ä½¿ç”¨æœç´¢ API è·å–é¿å‘å…³é”®è¯
# æ–¹æ¡ˆC: ç›´æ¥è®© AI åŸºäºè®­ç»ƒæ•°æ®ç”Ÿæˆé¿å‘æŒ‡å—
```

### 2. å®æ—¶äº¤é€šä¿¡æ¯æ¨¡å— ğŸš—

**åŠŸèƒ½æè¿°**:
é›†æˆé«˜å¾·åœ°å›¾ APIï¼Œæä¾›å®æ—¶äº¤é€šä¿¡æ¯å’Œæ‹¥å µé¢„æµ‹ï¼Œå¸®åŠ©ç”¨æˆ·è§„åˆ’è¡Œç¨‹ã€‚

**æ•°æ®æ¥æº**:
- é«˜å¾·åœ°å›¾ API (äº¤é€šæ€åŠ¿ã€æ‹¥å µé¢„æµ‹)
- é«˜å¾·è·¯çº¿è§„åˆ’ (é©¾è½¦ã€å…¬äº¤ã€æ­¥è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- å®æ—¶è·¯å†µæŸ¥è¯¢
- æ‹¥å µæ—¶æ®µé¢„æµ‹
- æœ€ä½³å‡ºè¡Œæ—¶é—´å»ºè®®
- å¤šç§å‡ºè¡Œæ–¹å¼å¯¹æ¯”

**æŠ€æœ¯æ–¹æ¡ˆ**:
```python
# éœ€è¦é…ç½®çš„ API
AMAP_API_KEY          # é«˜å¾·åœ°å›¾ API Key

# API ç«¯ç‚¹
# 1. äº¤é€šæ€åŠ¿: https://restapi.amap.com/v3/traffic/status/rectangle
# 2. è·¯çº¿è§„åˆ’: https://restapi.amap.com/v3/direction/driving
# 3. å…¬äº¤æŸ¥è¯¢: https://restapi.amap.com/v3/direction/transit/integrated
```

### 3. è®¢ç¥¨ä¿¡æ¯æ¨¡å— ğŸ«

**åŠŸèƒ½æè¿°**:
æä¾›æœºç¥¨ã€ç«è½¦ç¥¨ã€é…’åº—çš„é¢„è®¢å»ºè®®å’Œå®˜æ–¹é“¾æ¥ï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆå®Œæˆè¡Œç¨‹é¢„è®¢ã€‚

**æ•°æ®æ¥æº**:
- AI æ™ºèƒ½æ¨èï¼ˆDeepSeekï¼‰
- å®˜æ–¹é¢„è®¢å¹³å°ï¼ˆæºç¨‹ã€å»å“ªå„¿ã€12306ã€Booking.comï¼‰

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… æœºç¥¨é¢„è®¢å»ºè®®ï¼šèˆªç©ºå…¬å¸ã€èˆªç­ç±»å‹ã€é¢„ä¼°ä»·æ ¼ã€é¢„è®¢æ—¶æœº
- âœ… ç«è½¦ç¥¨é¢„è®¢å»ºè®®ï¼šé«˜é“/åŠ¨è½¦æ¨èã€è½¦æ¬¡é€‰æ‹©ã€è´­ç¥¨æŠ€å·§
- âœ… é…’åº—é¢„è®¢å»ºè®®ï¼šæ ¹æ®é¢„ç®—æ™ºèƒ½æ¨èã€ä½ç½®å»ºè®®ã€é¢„è®¢æŠ€å·§
- âœ… å®˜æ–¹é¢„è®¢é“¾æ¥ï¼šèšåˆä¸»æµè®¢ç¥¨å¹³å°
- âœ… è®¢ç¥¨æŠ€å·§ï¼šæå‰é¢„è®¢ã€é¿å¼€é«˜å³°ã€å¤šå¹³å°æ¯”ä»·

**æŠ€æœ¯æ–¹æ¡ˆ**:
```python
# å®¢æˆ·ç«¯
clients/booking_client.py

# æ ¸å¿ƒæ–¹æ³•
get_booking_info()      # è·å–å®Œæ•´è®¢ç¥¨ä¿¡æ¯
format_booking_info_for_guide()  # æ ¼å¼åŒ–ä¸ºæ”»ç•¥æ–‡æœ¬

# AI æ™ºèƒ½æ¨èï¼ˆæœºç¥¨ï¼‰
- ä½¿ç”¨ DeepSeek API ç”Ÿæˆä¸ªæ€§åŒ–å»ºè®®
- æ ¹æ®ç›®çš„åœ°ã€å‡ºå‘åœ°ã€é¢„ç®—å®šåˆ¶æ–¹æ¡ˆ

# è§„åˆ™å¼•æ“ï¼ˆç«è½¦ç¥¨ã€é…’åº—ï¼‰
- æ™ºèƒ½åˆ¤æ–­è·¨çœ/çœå†…è·¯çº¿
- æ ¹æ®é¢„ç®—æ¨èé…’åº—ç±»å‹
- æä¾›å®ç”¨çš„é¢„è®¢æŠ€å·§
```

---

## å¼€å‘ç­–ç•¥

### åˆ†æ”¯ç®¡ç†
```
master (v0.3.0 - ç¨³å®šç‰ˆ)
    â†‘
    â””â”€â”€ feature/v2.0 (å¼€å‘åˆ†æ”¯)
        â”œâ”€â”€ feature/pitfall-guide    (é¿å‘æŒ‡å—)
        â”œâ”€â”€ feature/traffic-info      (äº¤é€šä¿¡æ¯)
        â””â”€â”€ feature/booking-info      (è®¢ç¥¨ä¿¡æ¯)
```

### å¼€å‘æµç¨‹
1. åœ¨ `feature/v2.0` åˆ†æ”¯å¼€å‘åŠŸèƒ½
2. åŠŸèƒ½å®Œæˆåæœ¬åœ°æµ‹è¯•
3. æµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° `master`
4. æ ‡è®°ç‰ˆæœ¬å· (v2.1.0, v2.2.0, v2.3.0)

### é…ç½®æ¸…å•ï¼ˆå¾…æ·»åŠ ï¼‰

**v2.0 æ–°å¢é…ç½®**:
```
# é«˜å¾·åœ°å›¾
AMAP_API_KEY=your_amap_key

# æºç¨‹ï¼ˆå¯é€‰ï¼‰
CTRIP_API_KEY=your_ctrip_key

# å¤§ä¼—ç‚¹è¯„ï¼ˆå¯é€‰ï¼‰
MEITUAN_API_KEY=your_meituan_key
```

---

## æŠ€æœ¯æ ˆæ›´æ–°

### æ–°å¢ä¾èµ–
```
# é«˜å¾·åœ°å›¾ Python SDK
amap-python-sdk>=0.1.0

# ç½‘é¡µæŠ“å–ï¼ˆå¦‚éœ€è¦ï¼‰
beautifulsoup4>=4.12.0
selenium>=4.15.0  # åŠ¨æ€é¡µé¢
```

---

## ç‰ˆæœ¬è§„åˆ’

| ç‰ˆæœ¬ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| v0.3.0 | MVP ç¨³å®šç‰ˆ | âœ… å·²å‘å¸ƒ |
| v2.1.0 | é¿å‘æŒ‡å— | âœ… å·²å®Œæˆ (2026-02-17) |
| v2.2.0 | äº¤é€šä¿¡æ¯ | âœ… å·²å®Œæˆ (2026-02-17) |
| v2.3.0 | è®¢ç¥¨ä¿¡æ¯ | âœ… å·²å®Œæˆ (2026-02-18) |
| v3.0.0 | ç”¨æˆ·è®¤è¯åŠŸèƒ½ | âœ… å·²å®Œæˆ (2026-02-18) |
| v3.1.0 | æ–°åŠŸèƒ½ | ğŸ”„ è§„åˆ’ä¸­ |

### v3.0.0 å®ŒæˆçŠ¶æ€

**å·²å®Œæˆ**:
- [x] ä»£ç å¼€å‘ï¼ˆç”¨æˆ·è¡¨ã€è®¤è¯ã€ç™»å½•æ³¨å†Œé¡µé¢ï¼‰
- [x] ä»£ç æäº¤åˆ° feature/v3.0-auth åˆ†æ”¯
- [x] ç”¨æˆ·è¡¨ç»“æ„ç®€åŒ–ï¼ˆ3ä¸ªå­—æ®µï¼‰
- [x] ç§»é™¤ bcrypt ä¾èµ–ï¼Œä½¿ç”¨æ˜æ–‡å¯†ç 
- [x] åˆ é™¤ç®¡ç†é¡µé¢ï¼Œç®¡ç†å‘˜åœ¨é£ä¹¦è¡¨æ ¼ä¸­ç›´æ¥å®¡æ‰¹

**ä½¿ç”¨è¯´æ˜**:
1. åˆ›å»ºé£ä¹¦ç”¨æˆ·æ•°æ®è¡¨ï¼ˆusername, password, status ä¸‰ä¸ªå­—æ®µï¼‰
2. é…ç½® FEISHU_APP_TOKEN_USER å’Œ FEISHU_TABLE_ID_USER
3. ç”¨æˆ·æ³¨å†ŒåçŠ¶æ€ä¸º pending
4. ç®¡ç†å‘˜åœ¨é£ä¹¦è¡¨æ ¼ä¸­å°† status æ”¹ä¸º active

---

# v3.0 å¼€å‘æŒ‡å—

## å½“å‰åˆ†æ”¯

```bash
# å½“å‰åœ¨ feature/v3.0-auth åˆ†æ”¯
git branch
# * feature/v3.0-auth

# æŸ¥çœ‹æäº¤å†å²
git log --oneline -5
```

## ä½¿ç”¨è¯´æ˜

### 1. é…ç½®é£ä¹¦ç”¨æˆ·æ•°æ®è¡¨

å‚è€ƒ [docs/USER_TABLE_SETUP.md](docs/USER_TABLE_SETUP.md) åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨ï¼š

**å­—æ®µï¼ˆ3 ä¸ªï¼‰**:
- `username` - æ–‡æœ¬ç±»å‹
- `password` - æ–‡æœ¬ç±»å‹ï¼ˆæ˜æ–‡ï¼‰
- `status` - æ–‡æœ¬ç±»å‹ï¼ˆpending/activeï¼‰

### 2. æ›´æ–°é…ç½®æ–‡ä»¶

åœ¨ `.streamlit/secrets.toml` ä¸­æ·»åŠ ï¼š

```toml
FEISHU_APP_TOKEN_USER = "your_user_app_token"
FEISHU_TABLE_ID_USER = "your_user_table_id"
```

### 3. ä½¿ç”¨æµç¨‹

1. **ç”¨æˆ·æ³¨å†Œ** â†’ åœ¨ç½‘é¡µæ³¨å†Œï¼Œstatus è‡ªåŠ¨è®¾ä¸º `pending`
2. **ç®¡ç†å‘˜å®¡æ‰¹** â†’ åœ¨é£ä¹¦è¡¨æ ¼ä¸­å°† `status` æ”¹ä¸º `active`
3. **ç”¨æˆ·ç™»å½•** â†’ status ä¸º `active` æ‰èƒ½ç™»å½•

### 4. åˆ›å»ºç®¡ç†å‘˜è´¦å·

ç›´æ¥åœ¨é£ä¹¦è¡¨æ ¼ä¸­æ·»åŠ ï¼š

| username | password | status |
|----------|----------|--------|
| admin | your_admin_password | active |

## æ–°å¢æ–‡ä»¶æ¸…å•

- `clients/user_client.py` - é£ä¹¦ç”¨æˆ·æ•°æ®å®¢æˆ·ç«¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
- `clients/auth_client.py` - è®¤è¯å®¢æˆ·ç«¯ï¼ˆæ˜æ–‡å¯†ç ï¼‰
- `utils/auth.py` - è®¤è¯å·¥å…·å‡½æ•°
- `pages/1_ç™»å½•.py` - ç™»å½•é¡µé¢
- `pages/2_æ³¨å†Œ.py` - æ³¨å†Œé¡µé¢
- `docs/USER_TABLE_SETUP.md` - ç”¨æˆ·è¡¨é…ç½®æŒ‡å—ï¼ˆç®€åŒ–ç‰ˆï¼‰

**å·²å®Œæˆ**:
- [x] ä»£ç å¼€å‘ï¼ˆç”¨æˆ·è¡¨ã€è®¤è¯ã€ç™»å½•æ³¨å†Œé¡µé¢ï¼‰
- [x] ä»£ç æäº¤åˆ° feature/v3.0-auth åˆ†æ”¯
- [x] ç”¨æˆ·è¡¨ç»“æ„ç®€åŒ–ï¼ˆ3ä¸ªå­—æ®µï¼‰
- [x] ç§»é™¤ bcrypt ä¾èµ–
- [x] åˆ é™¤ç®¡ç†é¡µé¢
